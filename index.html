<html>
	<head>
		<link rel="stylesheet"  type="text/css" href="styles.css">
		<script type="text/javascript" src="client.js"></script>
		<title>Budget</title>
	</head>
	<body>
		<script type="text/javascript">
			const client = new Client();
			function submit(){
				const balance=parseFloat(document.getElementById("balance").value);
				client.publish("SetBalance", balance);
				client.publish("DailyCalculation");
				client.publish("RemainingDaysInCurrentMonth");
			};
			client.subscribe("DailyCalculation", (data, error)=>{
				if (error) throw error.data;
				const availableBalance=parseFloat(data.balance);
				client.subscribe("RemainingDaysInCurrentMonth", (data2, error2)=>{
					if (error2) throw error2.data;
					const remainingDays = data2.days;
					const dailyAmount = (availableBalance/remainingDays);	
					document.getElementById("daily").value = (Math.round(dailyAmount * 100) / 100);
					document.getElementById("balance").value = availableBalance;
				});
			});
		</script>
		<p>Daily Expenditure: <input type="text" id="daily" value=""/></p>
		<p>Total Balance: <input type="text" id="balance" value=""/></p>
		<input type="button" id="submit" onclick="submit()" value="Submit" />
	</body>
</html>
